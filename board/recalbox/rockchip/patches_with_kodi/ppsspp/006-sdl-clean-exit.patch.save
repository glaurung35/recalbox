--- a/ext/native/base/PCMain.cpp	2018-06-14 22:21:22.394197000 -0400
+++ b/ext/native/base/PCMain.cpp	2018-06-15 08:42:57.416655053 -0400
@@ -69,6 +69,7 @@
 GlobalUIState GetUIState();
 
 static SDL_Window* g_Screen = NULL;
+static SDL_GLContext glContext = nullptr;
 static bool g_ToggleFullScreenNextFrame = false;
 static int g_ToggleFullScreenType;
 static int g_QuitRequested = 0;
@@ -216,6 +217,26 @@
 }
 #endif
 
+void SDL_Close() {
+	SDL_PauseAudio(1);
+	SDL_CloseAudio();
+	fprintf(stderr, "Cleaning up SDL...\n", "");
+	if (g_Screen != NULL) {
+		SDL_GL_MakeCurrent(g_Screen, NULL);
+		SDL_GL_SwapWindow(g_Screen);
+	}
+	if (glContext != NULL) {
+	 	SDL_GL_DeleteContext(glContext);
+		glContext = NULL;
+	}
+	if (g_Screen != NULL) {
+		SDL_DestroyWindow(g_Screen);
+		g_Screen = NULL;
+	}
+	fprintf(stderr, "SDL Cleaned\n", "");
+	SDL_Quit();
+}
+
 int getDisplayNumber(void) {
 	int displayNumber = 0;
 	char * displayNumberStr;
@@ -264,6 +285,7 @@
 	} else if (!strcmp(command, "finish")) {
 		// Do a clean exit
 		g_QuitRequested = true;
+		SDL_Close();
 	}
 }
 
@@ -602,7 +624,7 @@
		return 2;
	}

-	SDL_GLContext glContext = SDL_GL_CreateContext(g_Screen);
+	glContext = SDL_GL_CreateContext(g_Screen);
	if (glContext == NULL) {
		NativeShutdown();
		fprintf(stderr, "SDL_GL_CreateContext failed: %s\n", SDL_GetError());
@@ -754,6 +775,7 @@
 			switch (event.type) {
 			case SDL_QUIT:
 				g_QuitRequested = 1;
+				SDL_Close();
 				break;
 
 #if !defined(MOBILE_DEVICE)
@@ -911,12 +933,16 @@
 				break;
 			}
 		}
-		if (g_QuitRequested)
+		if (g_QuitRequested) {
+			SDL_Close();
 			break;
+		}
 		const uint8_t *keys = SDL_GetKeyboardState(NULL);
 		UpdateRunLoop();
-		if (g_QuitRequested)
+		if (g_QuitRequested) {
+			SDL_Close();
 			break;
+		}
 #if !defined(MOBILE_DEVICE)
 		if (lastUIState != GetUIState()) {
 			lastUIState = GetUIState();
@@ -958,13 +984,10 @@
 #ifndef MOBILE_DEVICE
 	exit(0);
 #endif
-	SDL_PauseAudio(1);
-	SDL_CloseAudio();
+	SDL_Close();
 #ifdef USING_EGL
 	EGL_Close();
 #endif
-	SDL_GL_DeleteContext(glContext);
-	SDL_Quit();
 #if PPSSPP_PLATFORM(RPI)
 	bcm_host_deinit();
 #endif
