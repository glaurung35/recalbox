From 3432007d28ef173707e2b32bd931932e5b74085d Mon Sep 17 00:00:00 2001
From: Rudi Heitbaum <rudi@heitbaum.com>
Date: Tue, 21 May 2024 03:39:51 +1000
Subject: [PATCH] Fix type usage in softfloat to compile with gcc-14.1.0 (#657)

---
 sources/src/softfloat/softfloat.c | 10 ++++++----
 sources/src/softfloat/softfloat.h |  4 ++--
 2 files changed, 8 insertions(+), 6 deletions(-)

diff --git a/sources/src/softfloat/softfloat.c b/sources/src/softfloat/softfloat.c
index b3c0117c..a27bdfef 100644
--- a/sources/src/softfloat/softfloat.c
+++ b/sources/src/softfloat/softfloat.c
@@ -2883,12 +2883,13 @@ floatx80 floatx80_rem(floatx80 a, floatx80 b, float_status *status)
 
 }
 #else // 09-01-2017: Modified version for Previous
-floatx80 floatx80_rem(floatx80 a, floatx80 b, uint64_t *q, flag *s, float_status *status)
+floatx80 floatx80_rem(floatx80 a, floatx80 b, uae_u64 *q, flag *s, float_status *status)
 {
     flag aSign, bSign, zSign;
     int32_t aExp, bExp, expDiff;
     uint64_t aSig0, aSig1, bSig;
-    uint64_t qTemp, term0, term1, alternateASig0, alternateASig1;
+    uae_u64 qTemp;
+    uint64_t term0, term1, alternateASig0, alternateASig1;
 
     aSig0 = extractFloatx80Frac(a);
     aExp = extractFloatx80Exp(a);
@@ -2991,12 +2992,13 @@ floatx80 floatx80_rem(floatx80 a, floatx80 b, uint64_t *q, flag *s, float_status
  | value `a' with respect to the corresponding value `b'.
  *----------------------------------------------------------------------------*/
 
-floatx80 floatx80_mod(floatx80 a, floatx80 b, uint64_t *q, flag *s, float_status *status)
+floatx80 floatx80_mod(floatx80 a, floatx80 b, uae_u64 *q, flag *s, float_status *status)
 {
     flag aSign, bSign, zSign;
     int32_t aExp, bExp, expDiff;
     uint64_t aSig0, aSig1, bSig;
-    uint64_t qTemp, term0, term1;
+    uae_u64 qTemp;
+    uint64_t term0, term1;
 
     aSig0 = extractFloatx80Frac(a);
     aExp = extractFloatx80Exp(a);
diff --git a/sources/src/softfloat/softfloat.h b/sources/src/softfloat/softfloat.h
index 1eda33d5..142adc71 100644
--- a/sources/src/softfloat/softfloat.h
+++ b/sources/src/softfloat/softfloat.h
@@ -434,8 +434,8 @@ floatx80 floatx80_neg( floatx80 a, float_status *status );
 floatx80 floatx80_getexp( floatx80 a, float_status *status );
 floatx80 floatx80_getman( floatx80 a, float_status *status );
 floatx80 floatx80_scale(floatx80 a, floatx80 b, float_status *status );
-floatx80 floatx80_rem( floatx80 a, floatx80 b, uint64_t *q, flag *s, float_status *status );
-floatx80 floatx80_mod( floatx80 a, floatx80 b, uint64_t *q, flag *s, float_status *status );
+floatx80 floatx80_rem( floatx80 a, floatx80 b, uae_u64 *q, flag *s, float_status *status );
+floatx80 floatx80_mod( floatx80 a, floatx80 b, uae_u64 *q, flag *s, float_status *status );
 floatx80 floatx80_sglmul( floatx80 a, floatx80 b, float_status *status );
 floatx80 floatx80_sgldiv( floatx80 a, floatx80 b, float_status *status );
 floatx80 floatx80_cmp( floatx80 a, floatx80 b, float_status *status );
