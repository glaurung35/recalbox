<!--
@author Nicolas TESSIER aka Asthonishia
-->
<template>
  <div class="row">
    <div class="col col-xs-12 col-sm-12 col-md-6">
      <FormFragmentContainer title="emulation.global.display.title">
        <template v-slot:content>
          <WrappedSelect
            label="emulation.global.display.ratio.label"
            :options="ratioOptions"
            :getter="global.ratio"
            :setter="globalStore.post"
            apiKey="ratio"
            v-if="global.ratio"
          />
          <WrappedSelect
            label="emulation.global.display.videomode.label"
            :options="videomodeOptions"
            :getter="global.videomode"
            :setter="globalStore.post"
            apiKey="videomode"
            v-if="global.videomode"
            help
          >
            <template v-slot:help>
              {{ $t('emulation.global.display.videomode.help') }}
            </template>
          </WrappedSelect>
          <q-separator/>
          <WrappedToggle
            label="emulation.global.display.shaders.label"
            :getter="global.shaders"
            :setter="globalStore.post"
            apiKey="shaders"
            v-if="global.shaders"
          />
          <WrappedSelect
            label="emulation.global.display.shaderset.label"
            :options="shadersetOptions"
            :getter="global.shaderset"
            :setter="globalStore.post"
            apiKey="shaderset"
            v-if="global.shaderset"
            help
          >
            <template v-slot:help>
              {{ $t('emulation.global.display.shaderset.help.availableShaders') }}
              <ul>
                <li v-html="$t('emulation.global.display.shaderset.help.custom')"></li>
                <li v-html="$t('emulation.global.display.shaderset.help.none')"></li>
                <li v-html="$t('emulation.global.display.shaderset.help.retro')"></li>
                <li v-html="$t('emulation.global.display.shaderset.help.scanlines')"></li>
              </ul>
            </template>
          </WrappedSelect>
          <WrappedSelect
            label="emulation.global.display.customshaders.label"
            :options="shadersetfileOptions"
            :getter="global['shaderset.file']"
            :setter="globalStore.post"
            apiKey="shaderset.file"
            v-if="global['shaderset.file']"
            :disable="global.shaderset.value !== 'custom'"
          />
          <q-separator/>
          <WrappedToggle
            label="emulation.global.display.integerscale.label"
            :getter="global.integerscale"
            :setter="globalStore.post"
            apiKey="integerscale"
            v-if="global.integerscale"
            help
          >
            <template v-slot:help>
              {{ $t('emulation.global.display.integerscale.help') }}
            </template>
          </WrappedToggle>
          <q-separator/>
          <WrappedToggle
            label="emulation.global.display.smooth.label"
            :getter="global.smooth"
            :setter="globalStore.post"
            apiKey="smooth"
            v-if="global.smooth"
          />
        </template>
      </FormFragmentContainer>
      <FormFragmentContainer title="emulation.global.rewind.title">
        <template v-slot:content>
          <WrappedToggle
            label="emulation.global.rewind.label"
            warning
            :getter="global.rewind"
            :setter="globalStore.post"
            apiKey="rewind"
            v-if="global.rewind"
            help
          >
            <template v-slot:help>
              {{ $t('emulation.global.rewind.help') }}
            </template>
          </WrappedToggle>
        </template>
      </FormFragmentContainer>
      <FormFragmentContainer title="emulation.global.saves.title">
        <template v-slot:content>
          <WrappedToggle
            label="emulation.global.saves.autosave.label"
            :getter="global.autosave"
            :setter="globalStore.post"
            apiKey="autosave"
            v-if="global.autosave"
            help
          >
            <template v-slot:help>
              {{ $t('emulation.global.saves.autosave.help') }}
            </template>
          </WrappedToggle>
          <WrappedToggle
            label="emulation.global.saves.showsavestatebeforerun.label"
            :getter="global['show.savestate.before.run']"
            :setter="globalStore.post"
            apiKey="show.savestate.before.run"
            v-if="global['show.savestate.before.run']"
            help
          >
            <template v-slot:help>
              {{ $t('emulation.global.saves.showsavestatebeforerun.help') }}
            </template>
          </WrappedToggle>
        </template>
      </FormFragmentContainer>
    </div>
    <div class="col col-xs-12 col-sm-12 col-md-6">
      <FormFragmentContainer title="emulation.global.arcade.title">
        <template v-slot:content>
          <WrappedToggle
            label="emulation.global.arcade.activate.label"
            :getter="emulationstation.arcade"
            :setter="emulationstationStore.post"
            apiKey="arcade"
            v-if="emulationstation.arcade"
            help
          >
            <template v-slot:help>
              {{ $t('emulation.global.arcade.activate.help') }}
            </template>
          </WrappedToggle>
          <WrappedTextInput
            label="emulation.global.arcade.position.label"
            :getter="emulationstation['arcade.position']"
            :setter="emulationstationStore.post"
            apiKey="arcade.position"
            v-if="emulationstation['arcade.position']"
            help
          >
            <template v-slot:help>
              {{ $t('emulation.global.arcade.position.help') }}
            </template>
          </WrappedTextInput>
          <WrappedToggle
            label="emulation.global.arcade.includeNeogeo.label"
            :getter="emulationstation['arcade.includeneogeo']"
            :setter="emulationstationStore.post"
            apiKey="arcade.includeneogeo"
            v-if="emulationstation['arcade.includeneogeo']"
            help
          >
            <template v-slot:help>
              {{ $t('emulation.global.arcade.includeNeogeo.help') }}
            </template>
          </WrappedToggle>
          <WrappedToggle
            label="emulation.global.arcade.hideOriginals.label"
            :getter="emulationstation['arcade.hideoriginals']"
            :setter="emulationstationStore.post"
            apiKey="arcade.hideoriginals"
            v-if="emulationstation['arcade.hideoriginals']"
            help
          >
            <template v-slot:help>
              {{ $t('emulation.global.arcade.hideOriginals.help') }}
            </template>
          </WrappedToggle>
        </template>
      </FormFragmentContainer>
      <FormFragmentContainer title="emulation.global.translation.title">
        <template v-slot:content>
          <WrappedToggle
            label="emulation.global.translation.translate.label"
            :getter="global.translate"
            :setter="globalStore.post"
            apiKey="translate"
            v-if="global.translate"
          />

          <WrappedSelect
            label="emulation.global.translation.translateFrom.label"
            :options="translateFromOptions"
            :getter="global['translate.from']"
            :setter="globalStore.post"
            apiKey="translate.from"
            v-if="global['translate.from']"
            help
          >
            <template v-slot:help>
              {{ $t('emulation.global.translation.translateFrom.help') }}
            </template>
          </WrappedSelect>

          <WrappedSelect
            label="emulation.global.translation.translateTo.label"
            :options="translateToOptions"
            :getter="global['translate.to']"
            :setter="globalStore.post"
            apiKey="translate.to"
            v-if="global['translate.to']"
            help
          >
            <template v-slot:help>
              {{ $t('emulation.global.translation.translateTo.help') }}
            </template>
          </WrappedSelect>

          <WrappedTextInput
            label="emulation.global.translation.translateApiKey.label"
            :getter="global['translate.apikey']"
            :setter="globalStore.post"
            apiKey="translate.apikey"
            v-if="global['translate.apikey']"
            help
          >
            <template v-slot:help>
              {{ $t('emulation.global.translation.translateApiKey.help') }}
            </template>
          </WrappedTextInput>

          <WrappedTextInput
            label="emulation.global.translation.translateUrl.label"
            :getter="global['translate.url']"
            :setter="globalStore.post"
            apiKey="translate.url"
            v-if="global['translate.url']"
            help
          >
            <template v-slot:help>
              {{ $t('emulation.global.translation.translateUrl.help') }}
            </template>
          </WrappedTextInput>
        </template>
      </FormFragmentContainer>
    </div>
  </div>
</template>

<script lang="ts" setup>
import WrappedSelect from 'components/ui-kit/WrappedSelect.vue';
import WrappedTextInput from 'components/ui-kit/WrappedTextInput.vue';
import WrappedToggle from 'components/ui-kit/WrappedToggle.vue';
import { useGlobalStore } from 'stores/configuration/global';
import { useEmulationstationStore } from 'stores/configuration/emulationstation';
import { storeToRefs } from 'pinia';
import FormFragmentContainer from 'components/ui-kit/FormFragmentContainer.vue';

const globalStore = useGlobalStore();
globalStore.fetch();
const {
  ratioOptions,
  shadersetOptions,
  shadersetfileOptions,
  translateFromOptions,
  translateToOptions,
  videomodeOptions,
  global,
} = storeToRefs(globalStore);

const emulationstationStore = useEmulationstationStore();
emulationstationStore.fetch();
const {
  emulationstation,
} = storeToRefs(emulationstationStore);
</script>
