<!--
@author Nicolas TESSIER aka Asthonishia
-->
<template>
  <div class="row">
    <div class="col col-xs-12 col-sm-12 col-md-6">
      <FormFragmentContainer title="settings.emustation.display.title">
        <template v-slot:content>
          <WrappedSelect
            label="settings.emustation.display.videomode.label"
            :options="esVideomodeOptions"
            :getter="system['es.videomode']"
            :setter="systemStore.post"
            apiKey="es.videomode"
            v-if="system['es.videomode']"
            help
          >
            <template v-slot:help>
              {{ $t('settings.emustation.display.videomode.help') }}
            </template>
          </WrappedSelect>
        </template>
      </FormFragmentContainer>
      <FormFragmentContainer title="settings.emustation.menus.title">
        <template v-slot:content>
          <WrappedSelect
            label="settings.emustation.menus.menuStyle.label"
            :options="menuOptions"
            :getter="emulationstation.menu"
            :setter="emulationstationStore.post"
            apiKey="menu"
            v-if="emulationstation.menu"
            help
          >
            <template v-slot:help>
              {{ $t('settings.emustation.menus.menuStyle.help.availableOptions') }}
              <ul>
                <li v-html="$t('settings.emustation.menus.menuStyle.help.bartop')"></li>
                <li v-html="$t('settings.emustation.menus.menuStyle.help.default')"></li>
                <li v-html="$t('settings.emustation.menus.menuStyle.help.none')"></li>
              </ul>
            </template>
          </WrappedSelect>

          <q-separator/>

          <WrappedSelect
            label="settings.emustation.menus.systemSelectedAsDefault.label"
            :options="selectedsystemOptions"
            :getter="emulationstation.selectedsystem"
            :setter="emulationstationStore.post"
            apiKey="selectedsystem"
            v-if="emulationstation.selectedsystem"
            help
          >
            <template v-slot:help>
              {{ $t('settings.emustation.menus.systemSelectedAsDefault.help') }}
            </template>
          </WrappedSelect>

          <q-separator/>

          <WrappedToggle
            label="settings.emustation.menus.startFromFirstSystem.label"
            :getter="emulationstation.bootongamelist"
            :setter="emulationstationStore.post"
            apiKey="bootongamelist"
            v-if="emulationstation.bootongamelist"
            help
          >
            <template v-slot:help>
              {{ $t('settings.emustation.menus.startFromFirstSystem.help') }}
            </template>
          </WrappedToggle>
          <WrappedToggle
            label="settings.emustation.menus.disableSystemSelection.label"
            :getter="emulationstation.hidesystemview"
            :setter="emulationstationStore.post"
            apiKey="hidesystemview"
            v-if="emulationstation.hidesystemview"
            help
          >
            <template v-slot:help>
              {{ $t('settings.emustation.menus.disableSystemSelection.help') }}
            </template>
          </WrappedToggle>
          <WrappedToggle
            label="settings.emustation.menus.showOnlyScrapedGames.label"
            :getter="emulationstation.gamelistonly"
            :setter="emulationstationStore.post"
            apiKey="gamelistonly"
            v-if="emulationstation.gamelistonly"
            help
          >
            <template v-slot:help>
              {{ $t('settings.emustation.menus.showOnlyScrapedGames.help') }}
            </template>
          </WrappedToggle>
          <WrappedToggle
            label="settings.emustation.menus.clock.label"
            :getter="emulationstation.clock"
            :setter="emulationstationStore.post"
            apiKey="clock"
            v-if="emulationstation.clock"
            help
          >
            <template v-slot:help>
              {{ $t('settings.emustation.menus.clock.help') }}
            </template>
          </WrappedToggle>
        </template>
      </FormFragmentContainer>

      <FormFragmentContainer title="settings.emustation.theme.title">
        <template v-slot:content>
          <WrappedSelect
            label="settings.emustation.theme.folder.label"
            :options="themeFolderOptions"
            :getter="emulationstation['theme.folder']"
            :setter="emulationstationStore.post"
            apiKey="theme.folder"
            v-if="emulationstation['theme.folder']"
            help
          >
            <template v-slot:help>
              {{ $t('settings.emustation.theme.folder.help') }}
            </template>
          </WrappedSelect>
          <WrappedSelect
            label="settings.emustation.theme.transition.label"
            :options="themeTransitionOptions"
            :getter="emulationstation['theme.transition']"
            :setter="emulationstationStore.post"
            apiKey="theme.transition"
            v-if="emulationstation['theme.transition']"
            help
          >
            <template v-slot:help>
              {{ $t('settings.emustation.theme.transition.help.availableOptions') }}
              <ul>
                <li v-html="$t('settings.emustation.theme.transition.help.0')"></li>
                <li v-html="$t('settings.emustation.theme.transition.help.1')"></li>
                <li v-html="$t('settings.emustation.theme.transition.help.2')"></li>
              </ul>
            </template>
          </WrappedSelect>
          <WrappedToggle
            label="settings.emustation.theme.carousel.label"
            :getter="emulationstation['theme.carousel']"
            :setter="emulationstationStore.post"
            apiKey="theme.carousel"
            v-if="emulationstation['theme.carousel']"
            help
          >
            <template v-slot:help>
              {{ $t('settings.emustation.theme.carousel.help.availableOptions') }}
              <ul>
                <li v-html="$t('settings.emustation.theme.carousel.help.0')"></li>
                <li v-html="$t('settings.emustation.theme.carousel.help.1')"></li>
              </ul>
            </template>
          </WrappedToggle>
        </template>
      </FormFragmentContainer>
    </div>
    <div class="col col-xs-12 col-sm-12 col-md-6">
      <FormFragmentContainer title="settings.emustation.videoSnaps.title">
        <template v-slot:content>
          <WrappedSlider
            label="settings.emustation.videoSnaps.delay.label"
            :getter="emulationstation['videosnaps.delay']"
            :setter="emulationstationStore.post"
            apiKey="videosnaps.delay"
            v-if="emulationstation['videosnaps.delay']"
            :min="videosnapsDelayOptions.lowerValue"
            :max="videosnapsDelayOptions.higherValue"
            icon="mdi-clock-start"
            help
          >
            <template v-slot:help>
              {{ $t('settings.emustation.videoSnaps.delay.help') }}
            </template>
          </WrappedSlider>
          <WrappedSlider
            label="settings.emustation.videoSnaps.loop.label"
            :getter="emulationstation['videosnaps.loop']"
            :setter="emulationstationStore.post"
            apiKey="videosnaps.loop"
            v-if="emulationstation['videosnaps.loop']"
            :min="videosnapsLoopOptions.lowerValue"
            :max="videosnapsLoopOptions.higherValue"
            icon="mdi-reload"
            help
          >
            <template v-slot:help>
              {{ $t('settings.emustation.videoSnaps.loop.help.availableOptions') }}
              <ul>
                <li v-html="$t('settings.emustation.videoSnaps.loop.help.0')"></li>
                <li v-html="$t('settings.emustation.videoSnaps.loop.help.1')"></li>
              </ul>
            </template>
          </WrappedSlider>
        </template>
      </FormFragmentContainer>
      <FormFragmentContainer title="settings.emustation.patreon.title">
        <template v-slot:content>
          <WrappedTextInput
            label="settings.emustation.patreon.patron.privatekey.label"
            :getter="patron.privatekey"
            :setter="patronStore.post"
            apiKey="privatekey"
            v-if="patron.privatekey"
            help
          >
            <template v-slot:help>
              {{ $t('settings.emustation.patreon.patron.privatekey.help') }}
            </template>
          </WrappedTextInput>
          <WrappedSelect
            label="settings.emustation.patreon.scraper.source.label"
            :options="sourceOptions"
            :getter="scraper.source"
            :setter="scraperStore.post"
            apiKey="source"
            v-if="scraper.source"
            help
          >
            <template v-slot:help>
              {{ $t('settings.emustation.patreon.scraper.source.help') }}
            </template>
          </WrappedSelect>
          <WrappedToggle
            label="settings.emustation.patreon.scraper.auto.label"
            :getter="scraper.auto"
            :setter="scraperStore.post"
            apiKey="auto"
            v-if="scraper.auto"
            help
          >
            <template v-slot:help>
              {{ $t('settings.emustation.patreon.scraper.auto.help') }}
            </template>
          </WrappedToggle>
          <WrappedToggle
            label="settings.emustation.patreon.music.remoteplaylist.enable.label"
            :getter="music['remoteplaylist.enable']"
            :setter="musicStore.post"
            apiKey="remoteplaylist.enable"
            v-if="music['remoteplaylist.enable']"
            help
          >
            <template v-slot:help>
              {{ $t('settings.emustation.patreon.music.remoteplaylist.enable.help') }}
            </template>
          </WrappedToggle>
        </template>
      </FormFragmentContainer>

      <FormFragmentContainer title="settings.emustation.virtualsystems.title">
        <template v-slot:content>
          <WrappedToggle
            label="settings.emustation.virtualsystems.allgames.label"
            :getter="emulationstation['collection.allgames']"
            :setter="emulationstationStore.post"
            apiKey="collection.allgames"
            v-if="emulationstation['collection.allgames']"
            help
          >
            <template v-slot:help>
              {{ $t('settings.emustation.virtualsystems.allgames.help') }}
            </template>
          </WrappedToggle>
          <WrappedToggle
            label="settings.emustation.virtualsystems.multiplayer.label"
            :getter="emulationstation['collection.multiplayer']"
            :setter="emulationstationStore.post"
            apiKey="collection.multiplayer"
            v-if="emulationstation['collection.multiplayer']"
            help
          >
            <template v-slot:help>
              {{ $t('settings.emustation.virtualsystems.multiplayer.help') }}
            </template>
          </WrappedToggle>
          <WrappedToggle
            label="settings.emustation.virtualsystems.lastplayed.label"
            :getter="emulationstation['collection.lastplayed']"
            :setter="emulationstationStore.post"
            apiKey="collection.lastplayed"
            v-if="emulationstation['collection.lastplayed']"
            help
          >
            <template v-slot:help>
              {{ $t('settings.emustation.virtualsystems.lastplayed.help') }}
            </template>
          </WrappedToggle>
          <WrappedToggle
            label="settings.emustation.virtualsystems.lightgun.label"
            :getter="emulationstation['collection.lightgun.hide']"
            :setter="emulationstationStore.post"
            apiKey="collection.lightgun.hide"
            v-if="emulationstation['collection.lightgun.hide']"
            help
          >
            <template v-slot:help>
              {{ $t('settings.emustation.virtualsystems.lightgun.help') }}
            </template>
          </WrappedToggle>
          <WrappedToggle
            label="settings.emustation.virtualsystems.ports.label"
            :getter="emulationstation['collection.ports.hide']"
            :setter="emulationstationStore.post"
            apiKey="collection.ports.hide"
            v-if="emulationstation['collection.ports.hide']"
            help
          >
            <template v-slot:help>
              {{ $t('settings.emustation.virtualsystems.ports.help') }}
            </template>
          </WrappedToggle>
          <WrappedToggle
            label="settings.emustation.virtualsystems.tate.label"
            :getter="emulationstation['collection.tate']"
            :setter="emulationstationStore.post"
            apiKey="collection.tate"
            v-if="emulationstation['collection.tate']"
            help
          >
            <template v-slot:help>
              {{ $t('settings.emustation.virtualsystems.tate.help') }}
            </template>
          </WrappedToggle>
        </template>
      </FormFragmentContainer>
    </div>
  </div>
</template>

<script lang="ts" setup>
import WrappedSelect from 'components/ui-kit/WrappedSelect.vue';
import WrappedToggle from 'components/ui-kit/WrappedToggle.vue';
import { useEmulationstationStore } from 'stores/configuration/emulationstation';
import { storeToRefs } from 'pinia';
import { useSystemStore } from 'stores/configuration/system';
import WrappedSlider from 'components/ui-kit/WrappedSlider.vue';
import FormFragmentContainer from 'components/ui-kit/FormFragmentContainer.vue';
import { usePatronStore } from 'stores/configuration/patron';
import { useMusicStore } from 'stores/configuration/music';
import { useScraperStore } from 'stores/configuration/scraper';
import WrappedTextInput from 'components/ui-kit/WrappedTextInput.vue';

const emulationstationStore = useEmulationstationStore();
emulationstationStore.fetch();

const systemStore = useSystemStore();
systemStore.fetch();

const {
  menuOptions,
  selectedsystemOptions,
  videosnapsLoopOptions,
  videosnapsDelayOptions,
  themeFolderOptions,
  themeTransitionOptions,
  emulationstation,
} = storeToRefs(emulationstationStore);
const { esVideomodeOptions, system } = storeToRefs(systemStore);

const patronStore = usePatronStore();
patronStore.fetch();
const {
  patron,
} = storeToRefs(patronStore);

const musicStore = useMusicStore();
musicStore.fetch();
const {
  music,
} = storeToRefs(musicStore);

const scraperStore = useScraperStore();
scraperStore.fetch();
const {
  sourceOptions,
  scraper,
} = storeToRefs(scraperStore);
</script>
